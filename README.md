# Webpack Loader Runner Worker Demo

è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Web Worker æ¥è¿è¡Œ webpack loaders çš„é¡¹ç›®ã€‚é€šè¿‡å°† loader å¤„ç†æ”¾åœ¨ Worker çº¿ç¨‹ä¸­ï¼Œå¯ä»¥é¿å…é˜»å¡ä¸»çº¿ç¨‹çš„ UI æ¸²æŸ“å’Œç”¨æˆ·äº¤äº’ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **éé˜»å¡å¤„ç†**: ä½¿ç”¨ Web Worker åœ¨åå°çº¿ç¨‹å¤„ç†æ–‡ä»¶è½¬æ¢
- **æ”¯æŒå¤šç§ Loaders**: æ”¯æŒ TypeScriptã€Babelã€CSS ç­‰å„ç§ webpack loaders
- **å®æ—¶è¿›åº¦æ˜¾ç¤º**: æ˜¾ç¤ºå¤„ç†è¿›åº¦å’ŒçŠ¶æ€
- **ç»“æœå±•ç¤º**: æ¸…æ™°å±•ç¤ºè½¬æ¢åçš„ä»£ç å’Œ source map
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: åŸç”Ÿ JavaScript + HTML + CSS
- **Worker**: Web Worker + loader-runner
- **æœåŠ¡å™¨**: Express.js
- **åŒ…ç®¡ç†**: pnpm

## ğŸ“¦ å®‰è£…ä¾èµ–

```bash
pnpm install
```

## ğŸš€ å¯åŠ¨é¡¹ç›®

```bash
pnpm start
# æˆ–è€…
npm start
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:3000`

## ğŸ’¡ ä½¿ç”¨æ–¹æ³•

### 1. å¤„ç†æ–‡ä»¶
ç‚¹å‡»"å¤„ç†æ–‡ä»¶"æŒ‰é’®ï¼Œç³»ç»Ÿä¼šä½¿ç”¨ç¤ºä¾‹ TypeScript ä»£ç å’Œ Babel loader è¿›è¡Œè½¬æ¢ã€‚

### 2. æµ‹è¯• Loaders
ç‚¹å‡»"æµ‹è¯• Loaders"æŒ‰é’®ï¼Œç³»ç»Ÿä¼šè¿è¡Œå¤šä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬ï¼š
- TypeScript + Babel è½¬æ¢
- CSS + PostCSS å¤„ç†

### 3. ç›‘æ§çŠ¶æ€
- è§‚å¯Ÿè¿›åº¦æ¡æ˜¾ç¤ºå¤„ç†è¿›åº¦
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºäº†è§£å¤„ç†è¯¦æƒ…
- æŸ¥çœ‹ç»“æœå±•ç¤ºåŒºåŸŸè·å–è½¬æ¢åçš„ä»£ç 

## ğŸ”§ æ ¸å¿ƒå®ç°

### Worker é€šä¿¡åè®®
```javascript
// ä¸»çº¿ç¨‹å‘é€æ¶ˆæ¯
worker.postMessage({
  messageType: 'transform',
  id: 'unique-id',
  payload: [content, filename, query, loaders, sourceMap, cwd]
});

// Worker è¿”å›ç»“æœ
self.postMessage({
  id: 'unique-id',
  result: { source, map, assets, warnings, errors }
});
```

### Loader å¤„ç†æµç¨‹
1. ä¸»çº¿ç¨‹å‘é€æ–‡ä»¶å†…å®¹å’Œ loader é…ç½®
2. Worker ä½¿ç”¨ `loader-runner` æ‰§è¡Œè½¬æ¢
3. è¿”å›è½¬æ¢ç»“æœå’Œ source map
4. ä¸»çº¿ç¨‹å±•ç¤ºå¤„ç†ç»“æœ

## ğŸ“ é¡¹ç›®ç»“æ„

```
webpack-loader-worker-demo/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html          # ä¸»é¡µé¢
â”‚   â””â”€â”€ js/
â”‚       â”œâ”€â”€ main.js         # ä¸»çº¿ç¨‹é€»è¾‘
â”‚       â””â”€â”€ worker.js       # Worker çº¿ç¨‹é€»è¾‘
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ server.js               # Express æœåŠ¡å™¨
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ åº”ç”¨åœºæ™¯

- **æ„å»ºå·¥å…·**: åœ¨æµè§ˆå™¨ä¸­å®æ—¶é¢„è§ˆæ„å»ºç»“æœ
- **ä»£ç ç¼–è¾‘å™¨**: å®æ—¶è¯­æ³•æ£€æŸ¥å’Œè½¬æ¢
- **åœ¨çº¿ IDE**: æ”¯æŒå¤šç§è¯­è¨€çš„åœ¨çº¿ç¼–è¯‘ç¯å¢ƒ
- **æ•™å­¦æ¼”ç¤º**: å±•ç¤º webpack loader çš„å·¥ä½œåŸç†

## ğŸ” æ³¨æ„äº‹é¡¹

1. **æµè§ˆå™¨å…¼å®¹æ€§**: éœ€è¦æ”¯æŒ Web Worker çš„ç°ä»£æµè§ˆå™¨
2. **Loader ä¾èµ–**: æŸäº› loaders å¯èƒ½éœ€è¦é¢å¤–çš„ polyfill
3. **æ–‡ä»¶å¤§å°**: å¤§å‹æ–‡ä»¶å¤„ç†æ—¶æ³¨æ„å†…å­˜ä½¿ç”¨
4. **é”™è¯¯å¤„ç†**: ç¡®ä¿ Worker é”™è¯¯ä¸ä¼šå½±å“ä¸»çº¿ç¨‹

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## ï¿½ï¿½ è®¸å¯è¯

MIT License 